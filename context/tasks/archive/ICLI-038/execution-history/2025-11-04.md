# Execution History — ICLI-038 — 2025-11-04

- **Author:** Assistant (Codex)
- **Lifecycle stage:** Execution
- **Summary:** Added the single-run scenario harness (core types, adapters, fake/real fixtures, documentation, and
  Kotlin tests) inside the `samples` module.

## Implementation notes
- `samples/src/main/java/com/github/ulviar/icli/samples/scenarios/single/**` — Introduced `CommandInvocation`,
  `ScenarioExecutionResult`, `SingleRunExecutor`, package-level annotations, and adapters for iCLI, Commons Exec,
  zt-exec, NuProcess, and JLine.
- `samples/src/main/java/com/github/ulviar/icli/samples/fixtures/**` & `samples/src/main/kotlin/.../fixtures/**` — Added
  `FakeSingleRunProcess` plus Kotlin builders for fake commands and timeout cases.
- `samples/src/main/kotlin/com/github/ulviar/icli/samples/real/RealToolInvocations.kt` — Provided the `java -version`
  helper for real-tool coverage.
- `samples/src/main/kotlin/com/github/ulviar/icli/samples/scenarios/single/SingleRunExecutors.kt` — Kotlin accessors for
  the default adapter set.
- `samples/src/test/kotlin/.../SingleRunExecutorsTest.kt` — Exercised every adapter against the fake process and `java
  -version` to validate harness behaviour.
- [samples/AGENTS.md](/samples/AGENTS.md), [samples/README.md](/samples/README.md), [README.md](/README.md) — Documented
  harness usage, contribution workflow, and module entry point.
- Added package-level `@NotNullByDefault` files for new packages.

## Tests & verification
- `execute_gradle_task`: `spotlessApply`
- `run_gradle_tests`: `:samples:test`
- `run_gradle_tests`: `test`

## Documentation updates
- Root README includes a "Samples module" section.
- [samples/README.md](/samples/README.md) and [samples/AGENTS.md](/samples/AGENTS.md) describe the harness, fake/real
  command requirements, and executor usage.

## Follow-up & risks
- Scenario #1 (ICLI-039) should reuse the new harness and guard real-tool tests with assumptions where necessary.

## Retrospective & process improvement
- Goal/DoD met: the harness, adapters, fixtures, docs, and tests are in place.
- Process note: building adapters for multiple third-party libraries in one pass was manageable but consider extracting
  shared utilities (timeout helpers, output collectors) if additional scenarios introduce more complexity.

## Links
- [Backlog entry ICLI-038](../backlog.md)
