# Analysis Log — ICLI-006 — 2025-10-24

- **Author:** Assistant
- **Lifecycle stage:** Analysis
- **Context:** Baseline research to compare PTY integration options before selecting a dependency for interactive
  sessions.

## Knowledge consulted
- [Java Terminal & Process Integration — Knowledge
  Base](/context/knowledge-base/operations/Java%20Terminal%20%26%20Process%20Integration.md) — Reiterated the PTY
  requirements, highlighted pty4j as the only ready-made JVM library covering PTY/ConPTY scenarios, and clarified
  evaluation criteria (licensing, maintenance, native footprint).
- [iCLI Execution Engine: Cross-Language Benchmarks & Design
  Insights](/context/research/icli-execution-engine-benchmarks.md) — Summarised ecosystem alternatives and reinforced
  the need for battle-tested PTY backends.
- [pty4j README](https://github.com/JetBrains/pty4j/blob/master/README.md) — Confirmed feature scope (PTY on Unix,
  WinPTY on Windows) and operational considerations, informing Windows coverage analysis.citeturn15search4
- [pty4j license file](https://github.com/JetBrains/pty4j/blob/master/LICENSE.txt) — Identified Eclipse Public License
  1.0 obligations to assess compatibility with iCLI’s Apache 2.0 licensing.citeturn17open0
- [FreshPorts pty4j entry](https://www.freshports.org/devel/pty4j/) — Verified recent release 0.13.11 (2025-09-22),
  signalling active maintenance.citeturn9search10
- [Apache Commons Exec 1.4.0 release notes](https://commons.apache.org/proper/commons-exec/changes-report.html#1.4.0) —
  Observed that the latest release dates back to 2017, indicating limited recent activity.citeturn16view0
- [Apache Commons Exec user
  guide](https://commons.apache.org/proper/commons-exec/apidocs/org/apache/commons/exec/package-summary.html) — Noted
  the API focuses on process launching, stream handling, and watchdogs with no PTY/terminal capabilities, constraining
  its suitability for interactive needs.citeturn15search0
- [JNA GitHub repository](https://github.com/java-native-access/jna) — Collected data on 5.18.1 release (2025-09-10) and
  dual Apache 2.0/LGPL licensing to evaluate maintenance health and compliance.citeturn13search1turn18open0
- [Windows Command-Line: Introducing the Windows Pseudo Console
  (ConPTY)](https://devblogs.microsoft.com/commandline/windows-command-line-introducing-the-windows-pseudo-console-conpty/)
  — Reviewed Microsoft’s guidance on the ConPTY API to estimate the engineering effort if we built bindings in-house
  (e.g., via JNA).citeturn14search10
- [Jansi 2.4.2 release notes](https://github.com/fusesource/jansi/releases/tag/jansi-2.4.2) — Learned that the project
  is no longer maintained as of 2024-02-04 and its focus on ANSI emulation rather than PTY control.citeturn12view0

## Repository inspection
- Ran `rg "pty"` across the codebase to confirm there is no existing PTY integration or related dependencies, so
  introducing a new library will not collide with current modules.

## Gaps & questions
- Need to decide whether EPL-1.0 (pty4j) is acceptable for a dependency under our Apache 2.0 license.
- Determine whether pty4j’s reliance on WinPTY (instead of the newer ConPTY API) is an acceptable interim trade-off or
  if we must plan for additional Windows workarounds.

## Decision / readiness
- Ready to draft the decision summary and recommended dependency, noting the outstanding licensing consideration for
  maintainers to confirm.

## Next steps
- Prepare comparative matrix covering maintenance, licensing, native footprint, and Windows PTY strategy.
- Capture the dependency decision in the dossier and update the roadmap Phase 2 item.
