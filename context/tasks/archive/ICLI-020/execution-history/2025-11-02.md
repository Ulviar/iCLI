# Execution History — ICLI-020 — 2025-11-02

- **Author:** Assistant
- **Lifecycle stage:** Execution
- **Summary:** Restructured module exports and package layout so only the Essential/Advanced APIs remain public, moved
  diagnostics/engine classes, and updated documentation plus tests.

## Implementation notes
- Moved `StandardProcessEngine`, `ProcessEngineExecutionException`, and `ProcessShutdownException` into the exported
  package `src/main/java/com/github/ulviar/icli/engine/runtime/` and updated imports to consume relocated runtime
  helpers.
- Relocated diagnostics types to `src/main/java/com/github/ulviar/icli/engine/diagnostics/` and migrated all
  callers/tests to the new package.
- Shifted runtime helper packages under `src/main/java/com/github/ulviar/icli/engine/runtime/internal/` (including IO,
  launch, shutdown, terminal) and adjusted tests to mirror the new namespaces.
- Tightened `module-info.java` exports to `client`, `engine`, `engine.runtime`, `engine.diagnostics`, `engine.pool.api`,
  and `engine.pool.api.hooks`.
- Refreshed consumer documentation ([README.md](../../../../README.md)) with a Supported Packages section and added
  maintainer guidance in [context/guidelines/icli/public-api.md](../../../guidelines/icli/public-api.md).
- Updated integration/unit tests to match new package locations (e.g.,
  `src/integrationTest/kotlin/com/github/ulviar/icli/engine/runtime/StandardProcessEngineIntegrationTest.kt`).

## Tests & verification
- `./gradlew spotlessApply` — Passed (via MCP `spotlessApply`).
- `./gradlew test` — Passed (via MCP `run_gradle_tests`).
- `./gradlew integrationTest` — Passed (via MCP `run_gradle_tests`).
- `python scripts/pre_response_checks.py` — Passed.

## Documentation updates
- Added Supported Packages section to [README.md](../../../../README.md) and documented package policy in
  [context/guidelines/icli/public-api.md](../../../guidelines/icli/public-api.md).
- Updated dossier planning log [context/tasks/ICLI-020/analysis/2025-11-02.md](../analysis/2025-11-02.md) and status
  metadata in [context/tasks/ICLI-020/README.md](../README.md).

## Follow-up & risks
- Monitor for any external references to the old `core.runtime.*` packages in archived docs; update if maintainers
  request.
- Ensure future public API additions update the README and [public-api.md](public-api.md) tables.

## Retrospective & process improvement
- Goal and Definition of Done satisfied: public surface clarified, module exports tightened, tests/documentation
  aligned.
- Process improvement: when refactoring packages, run `testClasses` early to surface namespace issues before full test
  suites.

## Links
- Tests and formatting executed via MCP tooling; backlog entry ICLI-020 now in execution stage.
