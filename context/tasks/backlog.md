# Backlog

| ID | Title | Status | Stage | Goal | Constraints | Dossier | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- |
| ICLI-001 | Establish assistant-managed task workflow | Done | Done | Provide a repeatable structure for defining, analysing, researching, and executing tasks without an external tracker. | Workflow must cover planning, analysis, optional research, and execution phases with clear logging expectations. | [context/tasks/archive/ICLI-001/README.md](archive/ICLI-001/README.md) | Archived 2025-10-17; workflow live in context/tasks/README.md. |
| ICLI-002 | Consolidate execution requirements | Done | Done | Map functional and non-functional requirements for single-run, interactive, and pooled process modes. | Capture maintainer use cases and document cross-platform constraints ahead of architecture work. | [context/tasks/archive/ICLI-002/README.md](archive/ICLI-002/README.md) | Completed 2025-10-18; archived after publishing execution requirements brief. |
| ICLI-003 | Catalogue execution use cases & constraints | Done | Done | Document maintainer-sourced execution scenarios and cross-platform constraints to inform architecture work. | Use existing audits and knowledge base; defer new research unless gaps emerge. | [context/tasks/archive/ICLI-003/README.md](archive/ICLI-003/README.md) | Archived 2025-10-18; supports roadmap Phase 2 discovery effort. |
| ICLI-004 | Outline process execution architecture | Done | Done | Draft high-level architecture for single-run, interactive, and pooled execution components. | Align with execution requirements brief and existing knowledge base guidance. | [context/tasks/archive/ICLI-004/README.md](archive/ICLI-004/README.md) | Archived 2025-10-24; brief published and API/core alignment complete, follow-up implementation items tracked separately. |
| ICLI-005 | Implement command specification builder | Superseded | Archived | Build the `CommandSpec` builder with shell/direct execution modes and environment override support per the architecture brief. | Must follow architecture defaults, validate inputs, and prepare integration points for `ExecutionOptions`; adhere to Java 25 and Spotless formatting. | — | Delivered under ICLI-008 as `CommandDefinition`; no further action required. |
| ICLI-006 | Decide PTY dependency for interactive support | Done | Done | Evaluate pty4j, Apache Commons Exec, JNA ConPTY, and Jansi options, then record the dependency decision with rationale. | Must review maintenance status, licensing, JNI footprint, and Windows ConPTY coverage; capture outcome in roadmap/dossier. | [context/tasks/archive/ICLI-006/README.md](archive/ICLI-006/README.md) | Archived 2025-10-25 after selecting pty4j and documenting optional JLine usage. |
| ICLI-007 | Assess blocking vs non-blocking client API strategy | Done | Done | Determine how the architecture will expose synchronous and asynchronous workflows and document the chosen approach. | Compare runtime impact, virtual thread usage, and API ergonomics; update architecture brief once conclusions are reached. | [context/tasks/archive/ICLI-007/README.md](archive/ICLI-007/README.md) | Decision recorded 2025-10-26; architecture brief + dossier logs updated, task archived. |
| ICLI-008 | Build single command executor | Done | Done | Provide process launch flow with bounded output capture, exit status interpretation, and timeout/cancellation hooks per the architecture brief. | Must integrate with the emerging `CommandSpec`/`ExecutionOptions` APIs, honor bounded capture defaults, and prepare diagnostics without PTY dependencies yet. | [context/tasks/archive/ICLI-008/README.md](archive/ICLI-008/README.md) | Completed with pipe-based runtime, integration tests, and updated docs. |
| ICLI-009 | Implement PTY-backed interactive sessions | Done | Done | Build PTY-aware launcher and implement ProcessEngine.startSession per Phase 4 plan. | Must integrate the chosen PTY dependency (pty4j), cover cross-platform handling, and extend tests. | [context/tasks/archive/ICLI-009/README.md](archive/ICLI-009/README.md) | Archived 2025-10-28 after completing PTY interactive runtime and tests. |
| ICLI-010 | Implement streaming OutputCapture and diagnostics hooks | Done | Done | Enable OutputCapture.streaming() and emit diagnostics/truncation events per the architecture brief. | Requires streaming sinks, diagnostics bus, and validation via StandardProcessEngine. | [context/tasks/archive/ICLI-010/README.md](archive/ICLI-010/README.md) | Archived 2025-10-28 with streaming diagnostics delivered and follow-ups tracked separately. |
| ICLI-011 | Automate Windows integration tests | Planned | Discovery | Run `integrationTest` on Windows CI to cover system shell behaviour regularly. | CI job should only run the manual profile, gating releases. | — | Ensures cross-platform regressions are caught early. |
| ICLI-012 | Implement client async scheduler & runAsync surfaces | Done | Done | Deliver ClientScheduler plus runAsync/processAsync/processBytesAsync helpers across CommandService, LineSessionClient, and ProcessPoolClient per the ICLI-007 decision. | Default to virtual-thread scheduler; ensure CompletableFuture cancellation propagates interrupts and reuse existing diagnostics/timeout semantics. | [context/tasks/archive/ICLI-012/README.md](archive/ICLI-012/README.md) | Async scheduler + APIs shipped 2025-10-26; Kotlin bindings deferred to ICLI-013. |
| ICLI-013 | Publish Kotlin client companion module | Backlog | Planning | Provide a standalone Kotlin artifact exposing coroutine/Flow adapters for the async client APIs without pulling Kotlin into the core Java library. | Reuse ClientScheduler futures, keep module optional, and document dependency boundaries. | — | Follow-up to ICLI-012 after deferring built-in Kotlin support. |
| ICLI-014 | Design worker pool architecture | Done | Done | Produce a detailed API and behaviour specification for ProcessPool/WorkerLease covering configuration, scheduling, eviction, and shutdown flows. | Align with Phase 5 roadmap guidance; reuse ExecutionOptions defaults; document outstanding questions for diagnostics and metrics. | [context/tasks/archive/ICLI-014/README.md](archive/ICLI-014/README.md) | Provides design baseline for Phase 5 implementation; reference Phase 5 notes in context/roadmap/project-roadmap.md. |
| ICLI-015 | Implement worker pool runtime | Done | Done | Build the ProcessPool runtime with WorkerLease management, configurable sizing, idle eviction, and safe shutdown semantics. | Must follow ICLI-014 design, integrate with ProcessEngine.startSession, reuse ShutdownExecutor, and deliver unit/integration coverage. | [context/tasks/archive/ICLI-015/README.md](archive/ICLI-015/README.md) | Archived 2025-11-01 after delivering ProcessPool runtime, diagnostics, and coverage; pooled request APIs move to ICLI-016. |
| ICLI-016 | Add pooled request APIs & diagnostics | Done | Done | Provide ServiceProcessor/ProcessPoolClient request APIs with per-request timeouts, transcript resets, and metrics/diagnostics hooks. | Ensure async helpers integrate with ClientScheduler, surface diagnostics events, and update README/architecture docs. | [context/tasks/archive/ICLI-016/README.md](archive/ICLI-016/README.md) | Completed 2025-11-03; follow-up work tracked under ICLI-031–ICLI-033. |
| ICLI-017 | Deliver expect-style interaction helpers | Done | Done | Provide expect-style scripted interaction helpers plus README guidance for LineSession workflows. | Ensure helpers cover scripted prompt/response patterns and include sample documentation updates; coordinate with roadmap Phase 4. | [context/tasks/archive/ICLI-017/README.md](archive/ICLI-017/README.md) | Completed 2025-11-02; helper API + docs merged and roadmap Phase 4 closed. |
| ICLI-018 | Refresh execution scenario catalogue | Done | Done | Capture and maintain the authoritative list of execution scenarios, examples, and API touchpoints. | Coordinate with roadmap/backlog updates; ensure documentation reflects current priorities. | [context/tasks/archive/ICLI-018/README.md](archive/ICLI-018/README.md) | Completed 2025-11-02; roadmap/backlog alignment scheduled under ICLI-019. |
| ICLI-019 | Align roadmap/backlog with refreshed scenarios | Done | Done | Update roadmap documents and backlog entries to reflect prioritised execution scenarios and phased delivery. | Requires input from ICLI-018; ensure downstream tasks are sequenced accordingly. | [context/tasks/archive/ICLI-019/README.md](archive/ICLI-019/README.md) | Completed 2025-11-02; roadmap scenarios and backlog entries now trace directly to the refreshed catalogue. |
| ICLI-020 | Clarify public API surface | Done | Done | Document public vs internal packages, tighten `module-info.java`, and relocate classes if needed to enforce boundaries. | Avoid breaking current Essential/Advanced APIs; update docs alongside code changes. | [context/tasks/archive/ICLI-020/README.md](archive/ICLI-020/README.md) | |
| ICLI-021 | Audit documentation links & formatting | Done | Done | Sweep Markdown files to correct relative links (especially after archival moves) and enforce repository formatting rules. | Include archived dossiers; coordinate with maintainers before large-scale edits; no code changes expected. | [context/tasks/archive/ICLI-021/README.md](archive/ICLI-021/README.md) | Completed 2025-11-02; automated fixer and formatter in place. |
| ICLI-022 | Validate guidelines planning brief | Done | Done | Review [context/roadmap/guidelines-plan.md](/context/roadmap/guidelines-plan.md), confirm referenced artifacts exist, and execute or retire the plan. | Check references like [project-overview.md](project-overview.md), document gaps, and outline next steps for guideline rollout. | [context/tasks/archive/ICLI-022/README.md](archive/ICLI-022/README.md) | Completed 2025-11-02; roadmap snapshot and rollout checklist published for assistants. |
| TBD-001 | Design Essential API configuration presets | Planned | Discovery | Define scenario-driven default bundles that keep CommandService and pooled helpers ergonomic despite extensive configuration surfaces. | Presets must cover single-run, line session, interactive, and pooled flows; align with ExecutionOptions/ProcessPoolConfig defaults; capture documentation and rollout plan. | — | Raised 2025-11-03 after API restructuring discussion; prerequisite for simplifying configuration for consumers. |
| TBD-002 | Promote ResponseDecoder to CommandService state | Planned | Discovery | Store the default decoder on CommandService and allow builders to override it predictably. | Depends on TBD-001; ensure API remains ergonomic for custom decoders. | — | Aligns decoding strategy with service-level defaults. |
| ICLI-023 | Deliver listen-only streaming helpers | Done | Done | Provide a first-class client API for listen-only monitoring scenarios (tail/log follow) using stream-friendly helpers. | Must coexist with existing LineSessionClient/InteractiveSessionClient; document lifecycle, error handling, and transcript hooks. | [context/tasks/archive/ICLI-023/README.md](archive/ICLI-023/README.md) | Archived 2025-11-04 with listen-only runners shipped; Flow adapters remain a follow-up in external module. |
| ICLI-024 | Publish CLI-backed MCP adapter templates | Backlog | Planning | Create documentation and sample adapters that map catalogue MCP scenarios onto CommandService/ProcessPoolClient APIs. | Include JSON framing guidance, cancellation wiring, and diagnostics recommendations. | — | Supports Phase 6 documentation outlook tied to refreshed scenarios. |
| ICLI-025 | Add pooled conversation affinity features | Backlog | Planning | Extend pooled client APIs with worker affinity, reset semantics, and health signalling for stateful conversation workflows. | Builds on ICLI-016 outputs; ensure diagnostics capture conversation scope and retirement reasons. | — | Completes catalogue coverage for stateful conversation scenarios post-Phase 5. |
| ICLI-026 | Draft pooled command service design | Done | Done | Document `PooledCommandService`, pooled runner types, shared collaborators, and the migration strategy from `CommandService.pooled()`. | Base on the 2025-11-03 analysis log; capture diagnostics/listener wiring and package placement decisions in the dossier. | [context/tasks/archive/ICLI-026/README.md](archive/ICLI-026/README.md) | Archived 2025-11-03 with design note moved under the active pooled command service dossier. |
| ICLI-027 | Extract shared runner execution core | Done | Done | Factor common runner logic into reusable components usable by both standard and pooled flows. | Maintain current public behaviour, follow TDD, and extend unit coverage for the new layer. | [context/tasks/archive/ICLI-027/README.md](archive/ICLI-027/README.md) | Archived 2025-11-03; shared runner helpers now power existing services and pooled follow-ups. |
| ICLI-028 | Implement PooledCommandService facade | Done | Done | Add `PooledCommandService` plus `Pooled*Runner` types that delegate via the shared layer to `ProcessPool`. | Preserve `CommandService.pooled()` compatibility, wire diagnostics/reset semantics, and cover pooled scenarios with Kotlin tests. | [context/tasks/archive/ICLI-028/README.md](archive/ICLI-028/README.md) | Archived 2025-11-03 after pooled Essential facade shipped. |
| ICLI-029 | Align runners and docs with scenario focus | Done | Done | Audit runner usage and document scenario-specific helpers for standard and pooled workflows. | Update README, architecture brief, and examples to highlight the new facade structure and future scenario runners. | [context/tasks/archive/ICLI-029/README.md](archive/ICLI-029/README.md) | Archived 2025-11-04 after README + architecture updates landed. |
| ICLI-030 | Finalise pooled API cleanup & migration | Done | Done | Reposition or deprecate `ProcessPoolClient`, finish diagnostics hooks, and capture migration guidance for consumers. | Coordinate deprecation messaging with maintainers, keep backward compatibility, and update dossiers/tests accordingly. | [context/tasks/archive/ICLI-030/README.md](archive/ICLI-030/README.md) | Completed 2025-11-04; advanced helpers now reside under `client.pooled` with refreshed docs/tests. |
| ICLI-031 | Add pooled client integration coverage | Active | Blocked | Exercise `ProcessPoolClient` against the real `ProcessPool` with multi-worker configurations and live command sessions. | Use the integrationTest suite with deterministic fixtures; reuse ProcessEngine launchers instead of fakes. | [context/tasks/ICLI-031/README.md](ICLI-031/README.md) | Paused until ICLI-042 ships the configurable process fixture required for the remaining scenarios. |
| ICLI-032 | Stress-test ProcessPool multi-worker scenarios | Backlog | Planning | Expand unit/integration coverage to cover multi-worker reuse, contention, and retirement paths beyond the current 0–1 lease tests. | Configure pools with min/max > 1, drive concurrent leases, and assert diagnostics/metrics outputs. | — | Complements ICLI-031 by hardening pool runtime semantics under realistic load. |
| ICLI-033 | Introduce JMH performance benchmarks module | Backlog | Planning | Create a separate Gradle module with JMH microbenchmarks comparing single-run, session, and pooled workflows. | Ensure benchmarks compile with Java 25, integrate with Gradle 9.1, and document how to execute locally/CI. | — | Establishes baseline performance metrics for future optimization tasks. |
| ICLI-034 | Publish Kotlin Flow listen-only adapters | Backlog | Planning | Deliver a standalone Kotlin module that wraps the new listen-only `Flow.Publisher` streams into `kotlinx.coroutines.flow.Flow` helpers with ByteString codecs. | Must keep the core Java module free of Kotlin dependencies, document build/usage steps, and add regression tests in the new module. | — | Unblocks scenario consumers who prefer Kotlin Flow without regressing the Java-only core. |
| ICLI-035 | Instrument listen-only publishers for chunk telemetry | Backlog | Planning | Build a dedicated benchmark/test harness (separate source set or module) that drives high-volume stdout/stderr streams through `ListenOnlyStreamPublisher` and records chunk sizes, throughput, and latency. | Do not pollute main/test source sets; capture metrics in machine-readable form (CSV/JSON) and document reproduction steps. | — | Data informs whether chunk size/backpressure should be configurable or adaptive. |
| ICLI-036 | Plan samples module scope & dossier | Done | Done | Define objectives, success criteria, and task dossier for the new samples module to cover ergonomic comparisons through the first single-run scenario. | Document non-publishing intent, dual Java/Kotlin expectations, scenario template, and references back to roadmap/knowledge base. | [context/tasks/archive/ICLI-036/README.md](archive/ICLI-036/README.md) | Planning dossier archived 2025-11-04; feeds implementation tasks ICLI-037…ICLI-039. |
| ICLI-037 | Introduce multi-module build & samples skeleton | Done | Done | Convert the Gradle build to multi-module and add the `samples` module with shared toolchains, AGENTS, README, and dependency wiring while keeping it out of Maven Central publishing/CI release flows. | Preserve existing root behaviour, enforce Java 25 + Kotlin/JUnit 6 stack, and ensure the module follows repository formatting/static-analysis policies. | [context/tasks/archive/ICLI-037/README.md](archive/ICLI-037/README.md) | Samples module scaffolded 2025-11-04; follow-on tasks ICLI-038/ICLI-039 build on this foundation. |
| ICLI-038 | Author scenario harness & docs for single-run comparisons | Done | Done | Provide package structure, adapters, fixtures, and documentation so each single-run scenario can host iCLI and alternative library implementations in both Java and Kotlin. | Supply fake-process fixtures plus guarded real-tool hooks, document contribution steps in the module README, and avoid metrics/benchmarks. | [context/tasks/archive/ICLI-038/README.md](archive/ICLI-038/README.md) | Harness, adapters, fixtures, docs, and tests delivered 2025-11-04 to unblock scenario work. |
| ICLI-039 | Implement Scenario #1 — single-run command comparison | Superseded | Archived | Deliver the first single-run scenario showcasing iCLI alongside Commons Exec, zt-exec, NuProcess, and related libraries with Java/Kotlin samples plus paired tests (fake process + real CLI). | Choose a cross-platform CLI tool, guard real-tool assertions with JUnit tags/assumptions, and keep focus on API ergonomics rather than performance metrics. | [context/tasks/archive/ICLI-039/README.md](archive/ICLI-039/README.md) | Completed alongside ICLI-038 when the samples harness and tests landed; no separate work remains. |
| ICLI-040 | Prepare release-ready README docs | Backlog | Planning | Rebuild every module README for external OSS consumers ahead of the first release, covering installation, scenarios, and support guidance. | Scope includes root + samples (and any future modules); follow markdown rules, Essential-API-first messaging, and avoid leaking internal-only notes. | [context/tasks/ICLI-040/README.md](ICLI-040/README.md) | Added 2025-11-04 per maintainer request to shift documentation from contributor focus to user-facing guidance. |
| ICLI-041 | Audit Javadoc for OSS release quality | Backlog | Planning | Review every public/package Javadoc to remove internal roadmap language and ensure behaviour/error semantics are documented to a high standard. | Apply coding standards for documentation, keep content English-only, and align terminology with roadmap/use-case catalogue. | [context/tasks/ICLI-041/README.md](ICLI-041/README.md) | Added 2025-11-04 to align API docs with upcoming release messaging. |
| ICLI-042 | Build configurable process fixture module | Backlog | Planning | Implement the standalone process fixture described in [process-fixture-spec.md](process-fixture-spec.md) so tests can simulate single-run, line, and streaming workloads with controllable latency, payloads, and failures. | Must live in its own Gradle module, expose CLI/interactive modes, respect repo tooling (Java 25, Kotlin/JUnit 6), and keep randomness seedable for deterministic tests. | [context/tasks/ICLI-042/README.md](ICLI-042/README.md) | Enables richer integration/stress suites for pooled and streaming APIs before hardening releases. |
