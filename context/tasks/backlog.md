# Backlog

| ID | Title | Status | Stage | Goal | Constraints | Dossier | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- |
| ICLI-001 | Establish assistant-managed task workflow | Done | Done | Provide a repeatable structure for defining, analysing, researching, and executing tasks without an external tracker. | Workflow must cover planning, analysis, optional research, and execution phases with clear logging expectations. | [context/tasks/archive/ICLI-001/README.md](archive/ICLI-001/README.md) | Archived 2025-10-17; workflow live in context/tasks/README.md. |
| ICLI-002 | Consolidate execution requirements | Done | Done | Map functional and non-functional requirements for single-run, interactive, and pooled process modes. | Capture maintainer use cases and document cross-platform constraints ahead of architecture work. | [context/tasks/archive/ICLI-002/README.md](archive/ICLI-002/README.md) | Completed 2025-10-18; archived after publishing execution requirements brief. |
| ICLI-003 | Catalogue execution use cases & constraints | Done | Done | Document maintainer-sourced execution scenarios and cross-platform constraints to inform architecture work. | Use existing audits and knowledge base; defer new research unless gaps emerge. | [context/tasks/archive/ICLI-003/README.md](archive/ICLI-003/README.md) | Archived 2025-10-18; supports roadmap Phase 2 discovery effort. |
| ICLI-004 | Outline process execution architecture | Done | Done | Draft high-level architecture for single-run, interactive, and pooled execution components. | Align with execution requirements brief and existing knowledge base guidance. | [context/tasks/archive/ICLI-004/README.md](archive/ICLI-004/README.md) | Archived 2025-10-24; brief published and API/core alignment complete, follow-up implementation items tracked separately. |
| ICLI-005 | Implement command specification builder | Superseded | Archived | Build the `CommandSpec` builder with shell/direct execution modes and environment override support per the architecture brief. | Must follow architecture defaults, validate inputs, and prepare integration points for `ExecutionOptions`; adhere to Java 25 and Spotless formatting. | — | Delivered under ICLI-008 as `CommandDefinition`; no further action required. |
| ICLI-006 | Decide PTY dependency for interactive support | Done | Done | Evaluate pty4j, Apache Commons Exec, JNA ConPTY, and Jansi options, then record the dependency decision with rationale. | Must review maintenance status, licensing, JNI footprint, and Windows ConPTY coverage; capture outcome in roadmap/dossier. | [context/tasks/archive/ICLI-006/README.md](archive/ICLI-006/README.md) | Archived 2025-10-25 after selecting pty4j and documenting optional JLine usage. |
| ICLI-007 | Assess blocking vs non-blocking client API strategy | Done | Done | Determine how the architecture will expose synchronous and asynchronous workflows and document the chosen approach. | Compare runtime impact, virtual thread usage, and API ergonomics; update architecture brief once conclusions are reached. | [context/tasks/archive/ICLI-007/README.md](archive/ICLI-007/README.md) | Decision recorded 2025-10-26; architecture brief + dossier logs updated, task archived. |
| ICLI-008 | Build single command executor | Done | Done | Provide process launch flow with bounded output capture, exit status interpretation, and timeout/cancellation hooks per the architecture brief. | Must integrate with the emerging `CommandSpec`/`ExecutionOptions` APIs, honor bounded capture defaults, and prepare diagnostics without PTY dependencies yet. | [context/tasks/archive/ICLI-008/README.md](archive/ICLI-008/README.md) | Completed with pipe-based runtime, integration tests, and updated docs. |
| ICLI-009 | Implement PTY-backed interactive sessions | Done | Done | Build PTY-aware launcher and implement ProcessEngine.startSession per Phase 4 plan. | Must integrate the chosen PTY dependency (pty4j), cover cross-platform handling, and extend tests. | [context/tasks/archive/ICLI-009/README.md](archive/ICLI-009/README.md) | Archived 2025-10-28 after completing PTY interactive runtime and tests. |
| ICLI-010 | Implement streaming OutputCapture and diagnostics hooks | Done | Done | Enable OutputCapture.streaming() and emit diagnostics/truncation events per the architecture brief. | Requires streaming sinks, diagnostics bus, and validation via StandardProcessEngine. | [context/tasks/archive/ICLI-010/README.md](archive/ICLI-010/README.md) | Archived 2025-10-28 with streaming diagnostics delivered and follow-ups tracked separately. |
| ICLI-011 | Automate Windows integration tests | Planned | Discovery | Run `integrationTest` on Windows CI to cover system shell behaviour regularly. | CI job should only run the manual profile, gating releases. | — | Ensures cross-platform regressions are caught early. |
| ICLI-012 | Implement client async scheduler & runAsync surfaces | Done | Done | Deliver ClientScheduler plus runAsync/processAsync/processBytesAsync helpers across CommandService, LineSessionClient, and ProcessPoolClient per the ICLI-007 decision. | Default to virtual-thread scheduler; ensure CompletableFuture cancellation propagates interrupts and reuse existing diagnostics/timeout semantics. | [context/tasks/archive/ICLI-012/README.md](archive/ICLI-012/README.md) | Async scheduler + APIs shipped 2025-10-26; Kotlin bindings deferred to ICLI-013. |
| ICLI-013 | Publish Kotlin client companion module | Backlog | Planning | Provide a standalone Kotlin artifact exposing coroutine/Flow adapters for the async client APIs without pulling Kotlin into the core Java library. | Reuse ClientScheduler futures, keep module optional, and document dependency boundaries. | — | Follow-up to ICLI-012 after deferring built-in Kotlin support. |
| ICLI-014 | Design worker pool architecture | Backlog | Planning | Produce a detailed API and behaviour specification for ProcessPool/WorkerLease covering configuration, scheduling, eviction, and shutdown flows. | Align with Phase 5 roadmap guidance; reuse ExecutionOptions defaults; document outstanding questions for diagnostics and metrics. | — | Provides design baseline for Phase 5 implementation; reference Phase 5 notes in context/roadmap/project-roadmap.md. |
| ICLI-015 | Implement worker pool runtime | Backlog | Planning | Build the ProcessPool runtime with WorkerLease management, configurable sizing, idle eviction, and safe shutdown semantics. | Must follow ICLI-014 design, integrate with ProcessEngine.startSession, reuse ShutdownExecutor, and deliver unit/integration coverage. | — | Requires new pooled-process tests under src/test and src/integrationTest. |
| ICLI-016 | Add pooled request APIs & diagnostics | Backlog | Planning | Provide ServiceProcessor/ProcessPoolClient request APIs with per-request timeouts, transcript resets, and metrics/diagnostics hooks. | Ensure async helpers integrate with ClientScheduler, surface diagnostics events, and update README/architecture docs. | — | Depends on ICLI-015 runtime; completes Phase 5 deliverables. |
| TBD-001 | Define default ExecutionOptions/ResponseDecoder/ProcessEngine presets | Planned | Discovery | Lock in safe defaults so CommandService can offer short-form constructors (definition, definition+options, etc.). | Defaults must reflect documented requirements (bounded capture, timeouts, PTY strategy) and pass review before wiring into constructors. | — | Prerequisite for simplifying CommandService construction. |
| TBD-002 | Promote ResponseDecoder to CommandService state | Planned | Discovery | Store the default decoder on CommandService and allow builders to override it predictably. | Depends on TBD-001; ensure API remains ergonomic for custom decoders. | — | Aligns decoding strategy with service-level defaults. |
| TBD-003 | Design streaming/listen-only client API | Planned | Discovery | Provide a first-class helper for processes that only need stdout/stderr streaming without stdin interaction. | Must coexist with existing LineSessionClient/InteractiveSessionClient; outline life-cycle and error handling. | — | Targets tail/log-follow scenarios discussed during API review. |
